"use strict";(self.webpackChunkreact_notes_app=self.webpackChunkreact_notes_app||[]).push([[299],{8037:function(e,n,t){t.d(n,{B:function(){return i}});var r=t(5146),s=t(3246),a=t(184),i=function(e){var n=e.title;return(0,a.jsxs)("p",{className:s.Z.errorMessage,children:[(0,a.jsx)(r.Z,{}),n]})}},9256:function(e,n,t){t.d(n,{X:function(){return i}});var r="Heading_heading__5qV7V",s="Heading_paddingBottom__Gd-Ls",a=t(184),i=function(e){var n=e.title,t=e.children,i=e.paddingBottom;return(0,a.jsxs)("h1",{className:"".concat(r," ").concat(i?s:""),children:[n,t]})}},5026:function(e,n,t){t.d(n,{k:function(){return a}});t(2791);var r=t(6783),s=t(184),a=function(e){var n=e.title,t=e.type,a=e.disabled,i=e.onClick;return(0,s.jsx)("button",{onClick:i,className:r.Z.secondaryButton,disabled:a,type:t,children:n})}},716:function(e,n,t){t.d(n,{o:function(){return r}});var r={hidden:{opacity:0,x:-200,y:0},enter:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-200}}},9299:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var r=t(7781),s=t(1881),a=t(5048),i=t(716),o=t(1413),l=t(4165),c=t(5861),d=t(885),u=t(2791),p=t(8788),m=t(1720),h=t(3811),x={profileWrapper:"UserProfile_profileWrapper__tQO08",profileModules:"UserProfile_profileModules__2FIlb",profileHeader:"UserProfile_profileHeader__JOZ45",image:"UserProfile_image__d8Vz4",welcomeHeading:"UserProfile_welcomeHeading__+FwZL",profileInfo:"UserProfile_profileInfo__LORkm",optionsContent:"UserProfile_optionsContent__9nQEs",managmentWrapper:"UserProfile_managmentWrapper__DqdnZ",buttons:"UserProfile_buttons__0BK3V"},f=t(9256),_=t(5026),j=t(2450),g=t(7689),v=t(1087),w=t(975),b=t(5987),N=t(4293),Z=t(166),k=t(6015),y=t(4164),C="TabPanel_tabPanelWrapper__x+rKY",P="TabPanel_form__Ch7-2",F="TabPanel_fieldset__taW+6",S="TabPanel_passwordInput__vfmoU",B="TabPanel_passwordToggleButton__qaNBp",L=t(8037),U=t(1134),A=t(7168),T=t(361),W=document.getElementById("progress-bar-root"),H=t(184),D=function(){var e=(0,u.useState)(!0),n=(0,d.Z)(e,2),t=n[0],r=n[1],s=(0,u.useState)(!0),a=(0,d.Z)(s,2),i=a[0],m=a[1],h=(0,u.useState)(!1),x=(0,d.Z)(h,2),f=x[0],_=x[1],v=(0,u.useContext)(p.V),w=v.userData,b=v.logout,N=v.token,Z=v.update,k=(0,g.s0)(),C=(0,U.cI)(),D=C.register,I=C.handleSubmit,V=C.formState.errors,q=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),t={password:n.newPassword},e.prev=2,e.next=5,fetch(T.al,{method:"POST",body:JSON.stringify((0,o.Z)((0,o.Z)({},t),{},{idToken:N,returnSecureToken:!1})),headers:{"Content-type":"application/json"}});case 5:e.sent.ok&&(Z(w.id,t),b(),k("/login"),_(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:_(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,H.jsxs)(H.Fragment,{children:[y.createPortal(f&&(0,H.jsx)(A.k,{}),W),(0,H.jsxs)("form",{onSubmit:I(q),className:P,children:[(0,H.jsxs)("div",{className:F,children:[(0,H.jsx)("label",{htmlFor:"password",children:"Actual password"}),(0,H.jsxs)("div",{className:S,children:[(0,H.jsx)("input",(0,o.Z)({autoComplete:"off",id:"password",placeholder:"Actual password",type:t?"password":" text"},D("password",{required:!0,validate:function(e){return e===w.password}}))),(0,H.jsxs)("button",{onClick:function(){return r((function(e){return!e}))},type:"button",className:B,children:[t?"Show":"Hide"," password"]})]}),V.password?(0,H.jsx)(L.B,{title:"Actual password is invalid"}):null]}),(0,H.jsxs)("div",{className:F,children:[(0,H.jsx)("label",{htmlFor:"newPassword",children:"New password"}),(0,H.jsxs)("div",{className:S,children:[(0,H.jsx)("input",(0,o.Z)({autoComplete:"off",id:"newPassword",placeholder:"New password",type:i?"password":" text"},D("newPassword",{required:!0,minLength:8,maxLength:25}))),(0,H.jsxs)("button",{onClick:function(){return m((function(e){return!e}))},type:"button",className:B,children:[i?"Show":"Hide"," password"]})]}),V.newPassword?(0,H.jsx)(L.B,{title:"New password is invalid"}):null]}),(0,H.jsx)(j.c,{type:"submit",title:"Change password"})]})]})},I=function(){var e=(0,u.useContext)(p.V),n=e.userData,t=e.update,r=(0,u.useState)(!1),s=(0,d.Z)(r,2),a=s[0],i=s[1],m=(0,g.s0)(),h=(0,U.cI)(),x=h.register,f=h.handleSubmit,_=h.formState.errors,v=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(r){var s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),s=(0,o.Z)((0,o.Z)({},n),{},{name:r.name,surname:r.surname,nick:r.nick});try{t(n.id,s)}catch(a){console.log(a)}setTimeout((function(){i(!1),m(0)}),1e3);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,H.jsxs)(H.Fragment,{children:[y.createPortal(a&&(0,H.jsx)(A.k,{}),W),(0,H.jsxs)("form",{onSubmit:f(v),className:P,children:[(0,H.jsxs)("div",{className:F,children:[(0,H.jsx)("label",{htmlFor:"Name",children:"Your name"}),(0,H.jsx)("div",{className:S,children:(0,H.jsx)("input",(0,o.Z)({autoComplete:"off",id:"name",defaultValue:n.name,placeholder:"New name",type:"text"},x("name",{required:!0,minLength:2,maxLength:20})))}),_.name?(0,H.jsx)(L.B,{title:"Name is invalid"}):null]}),(0,H.jsxs)("div",{className:F,children:[(0,H.jsx)("label",{htmlFor:"Name",children:"Your surname"}),(0,H.jsx)("div",{className:S,children:(0,H.jsx)("input",(0,o.Z)({autoComplete:"off",id:"surname",defaultValue:n.surname,placeholder:"New surname",type:"text"},x("surname",{required:!0,minLength:2,maxLength:20})))}),_.surname?(0,H.jsx)(L.B,{title:"Surname is invalid"}):null]}),(0,H.jsxs)("div",{className:F,children:[(0,H.jsx)("label",{htmlFor:"Name",children:"Your nickname"}),(0,H.jsx)("div",{className:S,children:(0,H.jsx)("input",(0,o.Z)({autoComplete:"off",id:"nick",defaultValue:n.nick,placeholder:"New nickname",type:"text"},x("nick",{required:!0,minLength:2,maxLength:20})))}),_.nick?(0,H.jsx)(L.B,{title:"Nickname is invalid"}):null]}),(0,H.jsx)(j.c,{type:"submit",title:"Update profile"})]})]})},V=["children","value","index"],q=function(){var e=(0,u.useState)(0),n=(0,d.Z)(e,2),t=n[0],r=n[1],s=function(e){var n=e.children,t=e.value,r=e.index,s=(0,b.Z)(e,V);return(0,H.jsx)("div",(0,o.Z)((0,o.Z)({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},s),{},{children:t===r&&(0,H.jsx)(k.Z,{sx:{marginTop:"2rem"},children:n})}))},a=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}};return(0,H.jsxs)("div",{className:C,children:[(0,H.jsxs)(N.Z,{className:C,value:t,onChange:function(e,n){r(n)},"aria-label":"basic tabs example",children:[(0,H.jsx)(Z.Z,(0,o.Z)({disableRipple:!0,sx:{color:"var(--white-color)"},label:"Change password"},a(0))),(0,H.jsx)(Z.Z,(0,o.Z)({disableRipple:!0,sx:{color:"var(--white-color)"},label:"Edit user profile"},a(1)))]}),(0,H.jsx)(s,{value:t,index:0,children:(0,H.jsx)(D,{})}),(0,H.jsx)(s,{value:t,index:1,children:(0,H.jsx)(I,{})})]})},M=t(4453),Y=t(6808),E=t(8830),O=function(){var e=(0,u.useContext)(p.V),n=e.userData,t=e.logout,r=e.update,s=e.deleteData,a=(0,u.useState)(),i=(0,d.Z)(a,2),b=i[0],N=i[1],Z=(0,u.useState)(!1),k=(0,d.Z)(Z,2),y=k[0],C=k[1],P=(0,u.useState)(""),F=(0,d.Z)(P,2),S=F[0],B=F[1],L=(0,g.s0)(),U=(0,M.iH)(Y.t,"".concat(n.email,"/profile")),T=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=10;break}return C(!0),e.prev=2,e.next=5,(0,M.KV)(U,b).then((function(){C(!1),(0,E.h)("Avatar has been changed!")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:setTimeout((function(){C(!1),L(0)}),1e3);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){(0,M.Jt)(U).then((function(e){B(e);var t=(0,o.Z)((0,o.Z)({},n),{},{image:S});r(n.id,t)}))}),[S,U,r,n]),(0,H.jsxs)("div",{className:x.profileWrapper,children:[y&&(0,H.jsx)(A.k,{}),(0,H.jsx)(f.X,{paddingBottom:!0,title:"Your Profile"}),(0,H.jsxs)("div",{className:x.profileModules,children:[(0,H.jsxs)("div",{className:x.profileHeader,children:[(0,H.jsxs)("div",{className:x.image,children:[(0,H.jsx)("img",{src:n.image,alt:"userProfile"}),(0,H.jsx)(w.Z,{arrow:!0,title:"Change photo",placement:"right",children:(0,H.jsxs)(h.Z,{size:"large",color:"primary","aria-label":"upload picture",component:"label",children:[(0,H.jsx)("input",{onChange:function(e){return N(e.target.files[0])},hidden:!0,accept:"image/*",type:"file"}),(0,H.jsx)(m.Z,{})]})})]}),b?(0,H.jsx)(j.c,{title:"Upload",onClick:T}):null,(0,H.jsxs)("div",{className:x.welcomeHeading,children:[(0,H.jsxs)("h2",{children:[n.name," ",n.surname]}),(0,H.jsxs)("p",{children:["@",n.nick]})]})]}),(0,H.jsxs)("div",{className:x.profileInfo,children:[(0,H.jsxs)("div",{children:[(0,H.jsx)(f.X,{paddingBottom:!0,title:"Profile information"}),(0,H.jsxs)("ul",{children:[(0,H.jsx)("li",{children:(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{children:"Email"}),n.email]})}),(0,H.jsx)("li",{children:(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{children:"Name"}),n.name," ",n.surname]})}),(0,H.jsx)("li",{children:(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{children:"Created at"}),n.created]})}),(0,H.jsx)("li",{children:(0,H.jsxs)("div",{children:[(0,H.jsx)("h3",{children:"Last login"}),n.lastLogin]})})]})]}),(0,H.jsxs)("div",{className:x.optionsContent,children:[(0,H.jsx)(f.X,{paddingBottom:!0,title:"Profile settings"}),(0,H.jsx)("div",{className:x.content,children:(0,H.jsx)(q,{})})]}),(0,H.jsxs)("div",{className:x.managmentWrapper,children:[(0,H.jsx)(f.X,{paddingBottom:!0,title:"Account managment"}),(0,H.jsxs)("div",{className:x.buttons,children:[(0,H.jsx)(v.rU,{to:"/login",children:(0,H.jsx)(_.k,{onClick:function(){return s(n.id)},title:"Delete account"})}),(0,H.jsx)(v.rU,{to:"/login",children:(0,H.jsx)(j.c,{onClick:t,title:"Logout"})})]})]})]})]})]})},X=function(){return(0,H.jsx)(s.E.div,{variants:i.o,initial:"hidden",animate:"enter",exit:"exit",transition:{type:"linear"},className:r.Z.mainWrapper,children:(0,H.jsx)(a.i,{children:(0,H.jsx)(O,{})})})}},3246:function(e,n){n.Z={authForm:"AuthForm_authForm__wYHBL",form:"AuthForm_form__LUqvD",rowFormControl:"AuthForm_rowFormControl__HidrY",formControl:"AuthForm_formControl__Iqyuz",passwordInput:"AuthForm_passwordInput__AtSDc",passwordToggleButton:"AuthForm_passwordToggleButton__+bhYD",errorMessage:"AuthForm_errorMessage__Y4aDA",loginLink:"AuthForm_loginLink__eWpio"}},7781:function(e,n){n.Z={notesModules:"Notes_notesModules__t8DrM",header:"Notes_header__ocE+m",heading:"Notes_heading__Znaep",buttons:"Notes_buttons__DIUKt",notesLength:"Notes_notesLength__kjnUk",list:"Notes_list__s9tgu",mainWrapper:"Notes_mainWrapper__YwwSF",emptyWrapper:"Notes_emptyWrapper__s0Mvz",empty:"Notes_empty__viccy"}}}]);
//# sourceMappingURL=299.7a294c27.chunk.js.map